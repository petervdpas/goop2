<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{{.Title}} ‚Äî Goop¬≤ Docs</title>
  <link rel="icon" href="/favicon.ico" type="image/x-icon" />
  <link rel="stylesheet" href="/assets/style.css" />
  <link rel="stylesheet" href="/assets/docs.css" />
</head>
<body>
  <div class="container docs-container">
    <header class="header">
      <div class="header-left">
        <div class="logo">üì°</div>
        <div>
          <h1>Goop¬≤ Documentation</h1>
          <p class="subtitle">User guide &amp; reference</p>
        </div>
      </div>
      <div class="header-right">
        <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
          <span class="theme-icon">üåô</span>
        </button>
        <a class="nav-link" href="/">Home</a>
      </div>
    </header>

    <div class="docs-layout">
      <nav class="docs-sidebar glass">
        <div class="sidebar-title">Contents</div>
        {{range .Pages}}
        <a class="sidebar-link{{if eq .Slug $.Current.Slug}} active{{end}}" href="/docs/{{.Slug}}">{{.Title}}</a>
        {{end}}
      </nav>

      <main class="docs-content">
        <article class="docs-article glass">
          {{.Current.HTML}}
        </article>

        <div class="docs-nav-footer">
          {{if .Prev}}<a class="docs-nav-btn prev" href="/docs/{{.Prev.Slug}}">&larr; {{.Prev.Title}}</a>{{else}}<span></span>{{end}}
          {{if .Next}}<a class="docs-nav-btn next" href="/docs/{{.Next.Slug}}">{{.Next.Title}} &rarr;</a>{{else}}<span></span>{{end}}
        </div>
      </main>
    </div>

    <script>
      (function(){
        var t = document.getElementById('themeToggle'),
            i = t.querySelector('.theme-icon'),
            h = document.documentElement,
            s = localStorage.getItem('theme') || 'dark';
        h.setAttribute('data-theme', s);
        i.textContent = s === 'dark' ? '‚òÄÔ∏è' : 'üåô';
        t.onclick = function() {
          s = h.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
          h.setAttribute('data-theme', s);
          localStorage.setItem('theme', s);
          i.textContent = s === 'dark' ? '‚òÄÔ∏è' : 'üåô';
        };
      })();

      // SPA navigation: fetch public pages without credentials so the
      // browser never re-sends cached Basic-Auth headers (avoids
      // password-manager popups on every click).
      (function(){
        document.addEventListener('click', function(e){
          var a = e.target.closest('a');
          if (!a || a.target === '_blank') return;
          var h = a.getAttribute('href');
          if (!h || h.charAt(0) !== '/') return;
          if (h === '/' || h.indexOf('/docs') === 0) {
            e.preventDefault();
            fetch(h, {credentials:'omit'}).then(function(r){
              if (!r.ok) { location.href = h; return; }
              return r.text();
            }).then(function(t){
              if (!t) return;
              history.pushState(null, '', h);
              document.open(); document.write(t); document.close();
            }).catch(function(){ location.href = h; });
          }
        });
        window.addEventListener('popstate', function(){
          var p = location.pathname;
          if (p === '/' || p.indexOf('/docs') === 0) {
            fetch(p, {credentials:'omit'}).then(function(r){ return r.text(); }).then(function(t){
              document.open(); document.write(t); document.close();
            });
          }
        });
      })();
    </script>
  </div>
</body>
</html>
